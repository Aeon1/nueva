<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>Aplic. Web de jQuery Mobile</title>
<link rel="stylesheet" href="jquery-mobile/jquery.mobile-1.3.1.min.css" />
<link rel="stylesheet" href="jquery-mobile/style.css" />
    <script src="jquery-mobile/jquery-1.9.1.min.js"></script>
	<script src="jquery-mobile/jquery.mobile-1.3.1.min.js"></script>
<script src="phonegap.js"></script>
<script type="text/javascript" charset="utf-8">
    document.addEventListener("deviceready", onDeviceReady, false);
    function onDeviceReady() {
        navigator.geolocation.getCurrentPosition(onSuccess, onError);
    }
    
function onSuccess(position) {
		var latitude = position.coords.latitude; // Latitud
		var longitude = position.coords.longitude; // Longitud
		var initialLocation = new google.maps.LatLng(latitude, longitude);
        var image="img/fuerte/smiley_happy.png";
		var marker = new google.maps.Marker({
			position: initialLocation,
			map: map,            
			title: "You are here",
            icon: image
		});
	}

    function onError(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    }
   
    </script>
    <style>
    #content {
    padding: 0;
    position : absolute !important; 
    top : 40px !important;  
    right : 0; 
    bottom : 40px !important;  
    left : 0 !important;     
}</style>
</head> 
<body style="width:100%;margin:0;padding:0;"> 

<div data-role="page" id="page">

	<div data-role="header" data-position="fixed" data-theme="c">
    <a href="fuerte_ingles.html" rel="external" class="atras" data-transition="pop" data-inline="true"><img src="img/fuerte/back.png" alt="Back" class="ui-li-icon"/></a>
		<h1>Map</h1>
        </div>
	<div data-role="content" id="content">
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script>
    var lugares_his = [new google.maps.LatLng(26.421533207117303,-108.61990034580231),
    new google.maps.LatLng( 26.421124859972117,-108.62027049064636),new google.maps.LatLng( 26.420975933006375,-108.62079083919525)
    ,new google.maps.LatLng( 26.42142751740666,-108.62053334712982),new google.maps.LatLng( 26.4230608930239,-108.62075328826904)
    ,new google.maps.LatLng( 26.42038502734354,-108.62010955810547),new google.maps.LatLng( 26.42038502734354,-108.62010955810547)
    ,new google.maps.LatLng( 26.42340501988693,-108.6182427406311),new google.maps.LatLng( 26.41978451035643,-108.62006664276123)
    ,new google.maps.LatLng( 26.419850006884655,-108.62062454223633),new google.maps.LatLng( 26.421598702652307,-108.61856460571289)];
    var l_his = [
	['City Hall', 26.421533207117303,-108.61990034580231, 0, '<h3>City Hall</h3>It was built in 1907. Two floors building, constructed almost in his entired of brick,  with some quarry only in the back, has a central court surrounded of portals with a series of arches.'],
	['Constitutional Square', 26.421124859972117,-108.62027049064636, 1, '<h3>Constitutional Square</h3>The Central Square is the meeting point of  El Fuerte’s society.  It is a perfect space to walk and enjoy the cultural events.'],
	['The arches', 26.420975933006375,-108.62079083919525, 2, '<h3>The arches</h3>They are located on the west  side of the central square. It is a place where you can find handicraft and traditional food.'],
	['The church of Jesus Sacred heart', 26.42142751740666,-108.62053334712982, 3, '<h3>The church of Jesus Sacred heart</h3>In 1760 the church was under construction to replace the modest adobe temple that was located on Montesclaros´s Hill.'],
    ['Museum-Fort-Obresvation Point', 26.4230608930239,-108.62075328826904, 4, '<h3>Museum-Fort-Obresvation Point</h3>It is located on the hill´s highest part,  where you can observe El Fuerte River and the Magic Town.'],
    ['The House of the Vauit', 26.42038502734354,-108.62010955810547, 5, '<h3>The House of the Vauit</h3>This beautiful building was built at the end the 18th century.'],
    ['Donkey Alley', 26.42038502734354,-108.62010955810547, 6, '<h3>Donkey Alley</h3>The alley is an excellent example of ancient houses with their fronts of quarry stone with architectural details. '],
    ['The oldest House in "El Fuerte', 26.42340501988693,-108.6182427406311, 7, '<h3>The oldest House in "El Fuerte"</h3>It is the oldest house in town.  It was built in the middle of the 18th century.'],
    ['The House of General', 26.41978451035643,-108.62006664276123, 8, '<h3>The House of General</h3>The house of General Macías  actually is using as the restaurant "Meson del General". It was built  around 1850.'],
    ['The Orrantia Mansion', 26.419850006884655,-108.62062454223633, 9, '<h3>The Orrantia Mansion</h3>Historical Built in 1800. Known for the elaborate murals that were painted on some of the walls.'],
    ['The Constitution House', 26.421598702652307,-108.61856460571289, 10, '<h3>The Constitution House</h3>In spite of the passing of centuries and the diving of the original structure, the outside wall with the entrance, windows, and the iron gratings are still preserved. It´s less than one black from the square.']
];
var actividad=[new google.maps.LatLng(26.424577029243284,-108.62180471420288)
,new google.maps.LatLng(26.434319025642257,-108.62246990203857),new google.maps.LatLng(26.4331277408805,-108.62380027770996)
,new google.maps.LatLng(26.448817127077724,-108.70302200317383),new google.maps.LatLng(26.43516156393355,-108.62499117851257)
,new google.maps.LatLng(26.364989800787942,-108.59212338924408)];
var activ = [
	['The River Walk',26.424577029243284,-108.62180471420288, 0, '<h3>The River Walk</h3>It is a sidewalk beside the river, where the people use to do exercise.'],
    ['Take a Tour to La Galera',26.434319025642257,-108.62246990203857, 1, '<h3>Take a Tour to La Galera</h3>It is a family recreation area beside  the river. There are  sea food Restaurants, walking Paths and cooking areas where you can make your own barbecue.'],
    ['Raft Rides', 26.4331277408805,-108.62380027770996, 2, '<h3>Raft Rides</h3>It is the source of life and development in Northern Sinaloa. It has beginning in the Sierra Madre mountains and makes its way over six hundred kilometers and feeds three dams.'],
    ['Bass Fishing', 26.448817127077724,-108.70302200317383, 3, '<h3>Bass Fishing</h3>It is close to downtown. Located in the small fishing village "El Mahone", where you can practice fishing sport.'],
    ['Visit the archeological Site  Cerro de la Máscara', 26.43516156393355,-108.62499117851257, 4, '<h3>Visit the archeological Site  Cerro de la Máscara</h3> It is an archeological zone with the most examples of carved rocks in the state of Sinaloa. Thehill of the mask has been declared a natural protected area.'],
    ['Copper Canyon', 26.364989800787942,-108.59212338924408, 5, '<h3>Copper Canyon</h3>Take off on a spectacular adventure through the Tarahumara Sierra as you explore forests, canyons, gorges, rivers, tunnels and charming small towns aboard modern and comfortable train.'],
    ['', , 1, ''],

];

        var markers = [];
      var iterator = 0;
      var map;
      function initialize() {
       var haightAshbury = new google.maps.LatLng(26.416931451456314,-108.61680507659912);
        var mapOptions = {
          zoom: 14,
          center: haightAshbury,
          mapTypeId: google.maps.MapTypeId.ROADMAPs
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
	   infowindow = new google.maps.InfoWindow({
                content: "loading..."
            });
        
      }
       function historicos() {
        deleteOverlays();
        for (var i = 0; i < lugares_his.length; i++) {
           marker = new google.maps.Marker({
                       position: lugares_his[i],
                       map: map,
                        title:l_his[i][0],
                        zIndex: l_his[i][3],
                        html: l_his[i][4],
                       animation: google.maps.Animation.DROP                       
                     });
                     
                     markers.push(marker);
                     var contentString = "Some content";

            google.maps.event.addListener(marker, "click", function () {
                infowindow.setContent(this.html);
                infowindow.open(map, this);
            });
                     
            }   
      }
      function actividades() {
        deleteOverlays();
        for (var i = 0; i < actividad.length; i++) {
           marker = new google.maps.Marker({
                       position: actividad[i],
                       map: map,
                        title:activ[i][0],
                        zIndex: activ[i][3],
                        html: activ[i][4],
                       animation: google.maps.Animation.DROP                       
                     });
                     
                     markers.push(marker);
                     var contentString = "Some content";

            google.maps.event.addListener(marker, "click", function () {
                infowindow.setContent(this.html);
                infowindow.open(map, this);
            });
                     
            }   
      }

      
      function setAllMap(map) {
        for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(map);
        }
      }
       function deleteOverlays() {
               setAllMap(null);
               markers = [];
             }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
    <div id="map_canvas" style="height: 100%;"></div>
    </div>
    
    <div data-role="footer" style="overflow:hidden;" data-position="fixed">
    <h4 style="text-align:center;">Places</h4>
    <div data-role="navbar">
        <ul>
            <li><a href="#" onclick="actividades()">Activities</a></li>
            <li><a href="#" onclick="historicos()">Historic</a></li>
        </ul>
    </div><!-- /navbar -->
</div><!-- /footer -->
</div>



</body>
</html>